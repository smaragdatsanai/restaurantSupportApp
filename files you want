//MODEL ADMIN.MJS

export async function addOwnerRestaurant(name,address,opens,closes,type,ownerid){
  try{
    await Restaurant.create({
      Restaurant_Id: faker.datatype.uuid(),
      Name: name,
      Address: address,
      Opens_on: opens,
      Closes_at: closes,
      Restaurant_Type: type,
      OwnerId: ownerid
    });
  }catch(error){
    console.error('Error creating restaurant:',error);
  }
}


//ADMINCONTROLLER
const addRestaurant = async (req,res,next) => {
    try{
        const name = req.body.name;
        const address = req.body.address;
        const opens= req.body.opens;
        const closes = req.body.closes;
        const type = req.body.type;
        const ownerid = req.session.userId
        console.log(req.body)
        console.log(name,address,opens,closes,type,ownerid)
        const restaurant = await Owner.addOwnerRestaurant(name,address,opens,closes,type,ownerid)
        req.restaurant=restaurant;
        console.log(restaurant);
        next();
    }catch(error){
        next(error)
    }
}


//ROUTES
router.get('/add-restaurant',
    (req,res)=>{
        res.render('./add-restaurant');
    }
)
router.post('/place-restaurant',AdminController.addRestaurant,
    (req,res)=>{
        res.render('./adminhome',{message:"Restaurant added!"});
    }
)
