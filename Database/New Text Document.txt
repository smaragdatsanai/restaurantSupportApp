import {sequelize} from './db-config.mjs'
import {Op, Model, Datatypes} from 'sequelize'

const Owner = sequelize.define ('Owner', {
    Owner_Id:{
        type: Datatypes.STRING,
        allowNull: false,
        autoIncrement: false,
        primaryKey: true,
    },
    First_Name:{
        type: Datatypes.TEXT,
        allowNull: false
    },
    Last_Name:{
        type: Datatypes.TEXT,
        allowNull: true
    },
    Phone:{
        type: Datatypes.TEXT,
        allowNull:false
    },
    Email:{
        type: Datatypes.TEXT,
        allowNull:true
    }

});

const Restaurant = sequelize.define('Restaurant',{
    Restaurant_Id:{
        type: Datatypes.STRING,
        allowNull: false,
        primaryKey: true
    },
    Name:{
        type: Datatypes.TEXT
        allowNull: false
    }
});

const Menu = sequelize.define('Menu',{
    Menu_Id:{
        type: Datatypes.STRING,
        allowNull: false,
        primaryKey: true
    },
    Name:{
        type: Datatypes.TEXT,
        allowNull:false
    },
    Type:{
        type:Datatypes.TEXT,
        allowNull: false
    }
});

const Menu_Items = sequelize.define('Menu_Items',{
    Item_Id:{
        type: Datatypes.STRING,
        allowNull: false,
        primaryKey: true
    },
    Name:{
        type: Datatypes.TEXT,
        allowNull: false
    },
    Description:{
        type: Datatypes.TEXT,
        allowNull: true
    },
    Price:{
        type: Datatypes.FLOAT,
        allowNull: false
    }
    
});

const Review = sequelize.define('Review',{
    Review_Id:{
        type: Datatypes.STRING,
        allowNull:false,
        primaryKey: true
    },
    Rating:{
        type: Datatypes.TEXT,
        allowNull:false
    },
    Comments:{
        type: Datatypes.TEXT,
        allowNull:true
    }
});







import {sequelize} from 'sequelize'

const sequelize = new Sequelize ({
    host: 'localhost',
    port:5432,
    dialect: 'postgres',
    username: process.env.POSTGRES_USERNAME|| 'postgres',
    password: process.env.POSTGRES_PASSWORD|| 'mkaradel01',
    logging: false ,
    define:{
        timestamps: false ,
        freezeTableName: true
    },

});

const testDbConnection = async () => {
    try {
        await sequelize.authenticate();
        console.log("Connection has been established succesfully");
    } catch (error) {
        console.error("Unable to connect to database:", error );
    }
};

testDbConnection();
export(sequelize);
